<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "blog",
        "name" : "Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng",
        "headline" : "Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng",
        "description" : "Ở bài viết này, chúng ta sẽ đề cập đến bài toán tối ưu hoá ngẫu nhiên, và cách sử dụng thư viện mlrose để giải bài toán người giao hàng.",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2019",
        "datePublished": "2019-02-08 00:12:00 &#43;0300 &#43;0300",
        "dateModified" : "2019-02-08 00:12:00 &#43;0300 &#43;0300",
        "url" : "/blog/2019-02-08-randomized-optimization-in-python-v1/",
        "wordCount" : "638",
        "keywords" : [ "chấm điểm công dân","china","China social credit system","credit system","Blog" ]
    }
    </script>
        
            
                <title>Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.41" />
        
  
    
  

  

  <link rel="apple-touch-icon-precomposed" href='/favicon/apple-touch-icon-precomposed.png'>
  <link rel="icon" href='/favicon.ico'>
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content='/favicon/mstile.png'>
  <meta name="application-name" content="Phạm Duy Tùng Machine Learning Blog">
  <meta name="msapplication-tooltip" content="Blog ML của Phạm Duy Tùng">
  <meta name="msapplication-config" content='/favicon/ieconfig.xml'>



        
            <meta name="author" content="Phạm Duy Tùng">
        
        
            <meta name="description" content="Ở bài viết này, chúng ta sẽ đề cập đến bài toán tối ưu hoá ngẫu nhiên, và cách sử dụng thư viện mlrose để giải bài toán người giao hàng.">
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng"/>
<meta name="twitter:description" content="Ở bài viết này, chúng ta sẽ đề cập đến bài toán tối ưu hoá ngẫu nhiên, và cách sử dụng thư viện mlrose để giải bài toán người giao hàng."/>
<meta name="twitter:site" content="@example"/>

        <meta property="og:title" content="Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng" />
<meta property="og:description" content="Ở bài viết này, chúng ta sẽ đề cập đến bài toán tối ưu hoá ngẫu nhiên, và cách sử dụng thư viện mlrose để giải bài toán người giao hàng." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2019-02-08-randomized-optimization-in-python-v1/" />



<meta property="article:published_time" content="2019-02-08T00:12:00&#43;03:00"/>

<meta property="article:modified_time" content="2019-02-08T00:12:00&#43;03:00"/>











        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng">
<meta itemprop="description" content="Ở bài viết này, chúng ta sẽ đề cập đến bài toán tối ưu hoá ngẫu nhiên, và cách sử dụng thư viện mlrose để giải bài toán người giao hàng.">


<meta itemprop="datePublished" content="2019-02-08T00:12:00&#43;03:00" />
<meta itemprop="dateModified" content="2019-02-08T00:12:00&#43;03:00" />
<meta itemprop="wordCount" content="638">



<meta itemprop="keywords" content="chấm điểm công dân,china,China social credit system,credit system," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
			<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.15.8/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-114911596-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    </head>
    <body>

      
      

    
    
<header id="header">

    <nav class="navbar navbar-expand-md navbar-dark" style="background: #790014; color: hsla(0,0%,100%,1);">
	<a href="#" class="navbar-brand">
	<img src="/post_image/avata.jpg" class="rounded-circle" alt="PDT" style="width:36px;"></a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            
                <li class="nav-item">
                    <a class='nav-link' href="/blog">
                            <i class="fa fa-home active">&nbsp;</i>Home
                    </a>
                </li>
            
                <li class="nav-item">
                    <a class='nav-link' href="/news/">
                            <i class="fa fa-list">&nbsp;</i>News
                    </a>
                </li>
            
                <li class="nav-item">
                    <a class='nav-link' href="/xem-truyen/">
                            <i class="fa fa-id-card-o">&nbsp;</i>Truyện
                    </a>
                </li>
            
        </ul>
    </nav>
    </div>
</header>


   
    
	<div class="container">
	<div class="adv"></div>
	<div class="row">
    <main role="main" class="bg-white" style="margin:0; padding:0; box-shadow: 1px 1px 10px rgba(0,0,0,0.1);" >
	
        
        
        <article class="post">
  


        
		<div class="thumbnail text-center">
		 <img class="img-fluid single-content-img lazy" src="/post_image/global_maximin.jpg" style="width:100%">
		  <div class="caption  text-white">
            <h3 class="title">Tối ưu hoá ngẫu nhiên - Bài toán người giao hàng</h3>
			
			<p class="title-caption">
			 
			  <time class="published"
            datetime='2019-02-08'>
            08/02/2019</time>
		 - 
			   <span class="author-inline">Phạm Duy Tùng</span>
			   </p>
			</div>
			</div>
            
        
       



  

  

  <div id="content">
    

<h2 id="bài-toán-người-giao-hàng-là-gì">Bài toán người giao hàng là gì</h2>

<p>Người giao hàng là bài toán cơ bản trong nhóm bài toán tối ưu. Bài toán được phát biểu như sau: Có một người giao hàng cần đi giao hàng tại n thành phố. Xuất phát từ một thành phố nào đó, đi qua các thành phố khác để giao hàng và trở về thành phố ban đầu. Mỗi thành phố chỉ đến một lần, khoảng cách từ một thành phố đến các thành phố khác là xác định được. Hãy tìm một chu trình (một đường đi khép kín thỏa mãn điều kiện trên) sao cho tổng độ dài các cạnh là nhỏ nhất.</p>

<p>Có rất nhiều cách để giải bài toán này, các bạn đọc có thể search google để tìm thêm cách giải khác, ở đây, mình sẽ trình bày cách sử dụng thư viện mlrose của python để giải quyết bài toán trên.</p>

<h2 id="cài-đặt-chương-trình-và-thực-thi">Cài đặt chương trình và thực thi</h2>

<p>Chúng ta giả định rằng người giao hàng sẽ đi qua 5 thành phố, và mỗi thành phố sẽ có 2 giá trị x và y tương ứng với toạ độ của các thành phố đó trên bản đồ.</p>

<pre><code class="language-python">input = [
[9, 12],
[24, 15],
[12 ,30],
[4 ,3],
[13, 27],
]
</code></pre>

<p>Theo phần trước, chúng ta sẽ xây dựng 4 phần</p>

<h3 id="xây-dựng-vector-state">Xây dựng vector state</h3>

<p>Đơn giản là một vector x có số lượng phần tử bằng số lượng thành phố  mà người giao hàng sẽ viết thăm</p>

<p>x = [x0,x1,2,x3,x4], trong đó, giá trị x1 là chỉ số của thành phố người giao hàng sẽ ghé đầu tiên, x0 là toạ độ thành phố bắt đầu</p>

<h3 id="xây-dựng-hàm-fitness-function">Xây dựng hàm fitness function</h3>

<p>Mục tiêu của bài toán là tìm đường đi ngăn nhất, nên chúng ta có thể dễ dàng xây dựng hàn fitness bằng cách tính khoảng cách euclide giữa các thành phố.</p>

<pre><code class="language-python">
def fitness_fun(state):
    distance = 0

    for index in range(1, len(state)):
        dist = np.linalg.norm(input[state[index-1]]-input[state[index]])

        distance = distance + dist

    dist = np.linalg.norm(input[state[0]]-input[state[len(state)-1]])
    distance = distance + dist

    return distance
    
fitness_cust = mlrose.CustomFitness(fitness_fun,'tsp')
</code></pre>

<h3 id="xác-định-loại-bài-toán">Xác định loại bài toán</h3>

<p>Đây là bài toán rời rạc không lặp, nên ta sẽ sử dụng hàm TSPOpt, length = 5 do số lượng phần tử của state là 5, maximize=False do bài toán tìm đường đi ngắn nhất .</p>

<pre><code class="language-python">problem_fit = mlrose.TSPOpt(length = 5, fitness_fn = fitness_cust,
                            maximize=False)
</code></pre>

<h3 id="xác-định-thuật-toán-tối-ưu">Xác định thuật toán tối ưu</h3>

<p>Chúng ta vẫn tiếp tục sử dụng thuật toán simulated_annealing như trước xem kết quả như thế nào</p>

<pre><code class="language-python">#Define decay schedule
schedule = mlrose.ExpDecay()

# Define initial state
init_state = np.array([0, 1, 2, 3, 4])

# Set random seed
np.random.seed(1)

# Solve problem using simulated annealing
best_state, best_fitness = mlrose.simulated_annealing(problem, schedule = schedule,
                                                      max_attempts = 10, max_iters = 500,
                                                      init_state = init_state)

print('The best state found is: ', best_state)
print('The fitness at the best state is: ', best_fitness)
</code></pre>

<p>Kết quả</p>

<pre><code class="language-python">The best state found is:  [1 4 2 0 3]
The fitness at the best state is:  71.30882356753094
</code></pre>

<p>Đây là kết quả tối ưu của bài toán.</p>

<p>Thử thay bằng giải thuật di truyền GA, với tỷ lệ đột biến là 0.2</p>

<pre><code class="language-python">best_state, best_fitness = mlrose.genetic_alg(problem,mutation_prob = 0.2)

print('The best state found is: ', best_state)
print('The fitness at the best state is: ', best_fitness)
</code></pre>

<p>Kết quả</p>

<pre><code class="language-python">
The best state found is:  [0 2 4 1 3]
The fitness at the best state is:  71.30882356753094

</code></pre>

<p>Thử thay đổi tập dữ liệu input có nhiều số phần tử hơn</p>

<pre><code class="language-python">input =[(1, 1), (4, 2), (5, 2), (6, 4), (4, 4), (3, 6), (1, 5), (2, 3)]
</code></pre>

<p>Kết quả</p>

<pre><code class="language-python">The best state found is:  [3 4 5 6 7 0 1 2]
The fitness at the best state is:  17.34261754766733
</code></pre>

<p>Cảm ơn các bạn đã theo dõi. Hẹn gặp bạn ở các bài viết tiếp theo.</p>

  </div>

  <footer>
    <ul class="stats list-unstyled">
 
    
  <li class="tags">
    <ul class="list-inline">
       
            
            
                <i class="fa fa-tags"></i>
                
                
                <li class="list-inline-item"><a class="article-category-link" href="/tags/ch%E1%BA%A5m-%C4%91i%E1%BB%83m-c%C3%B4ng-d%C3%A2n">chấm điểm công dân</a></li>
                
                
                <li class="list-inline-item"><a class="article-category-link" href="/tags/china">china</a></li>
                
                
                <li class="list-inline-item"><a class="article-category-link" href="/tags/china-social-credit-system">China social credit system</a></li>
                
                
                <li class="list-inline-item"><a class="article-category-link" href="/tags/credit-system">credit system</a></li>
                
            
        
    </ul>
  </li>
  
</ul>

  </footer>

</article>
<div class="col-md-12">
<div class="card-header">Bài viết khác</div>
<ul class="">
    
        <li class="page-item"><a href="/blog/2019-02-08-getting-started-with-randomized-optimization-in-python/"
                class="button big previous">Tối ưu hoá ngẫu nhiên</a></li>
    

    
        <li class="page-item"><a href="/blog/2019-03-16-vietnamese-accent/"
                class="button big next">Thêm dấu tiếng việt cho câu không dấu</a></li>
    
</ul>
</div>


    <article class="post">
        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "phamduytung" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>




		
    </main>
    
	</div>
	</div>
    
	<hr>
  <footer class="footer">
  <div class="container text-center">
    
    <p class="copyright">
      
        &copy; 2019
        
          Phạm Duy Tùng Machine Learning Blog
        
      
     
    </p>
	</div>
  </footer>
    
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.15.8/languages/python.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
     
    

    
      
        
      
    
	
    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


	  
	  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114911596-1"  data-cfasync="false"></script>
<script  data-cfasync="false">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114911596-1');
</script>
<script src="https://cdn.jsdelivr.net/npm/intersection-observer@0.5.1/intersection-observer.js"  data-cfasync="false"></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@12.0.0/dist/lazyload.min.js"  data-cfasync="false"></script>
	   <script  type="text/javascript"  data-cfasync="false">

  function getcontent(){
 

   

             var myLazyLoad = new LazyLoad({
    elements_selector: ".lazy"
});
                });
            }
			
			$(document).ready(function(){
			getcontent();
			}); 
</script>
  </body>
</html>

