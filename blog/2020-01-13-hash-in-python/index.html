<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "\/"
        },
        "articleSection" : "blog",
        "name" : "Các hàm hash có sẵn trong python",
        "headline" : "Các hàm hash có sẵn trong python",
        "description" : "Trong bài viết này, mình sẽ đề cập đến các thuật toán hash có sẵn trong python",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2020",
        "datePublished": "2020-01-25 00:19:00 \x2b0300 \x2b0300",
        "dateModified" : "2020-01-25 00:19:00 \x2b0300 \x2b0300",
        "url" : "\/blog\/2020-01-13-hash-in-python\/",
        "wordCount" : "1126",
        "keywords" : [ "python","hash","Blog" ]
    }
    </script>
        
            
                <title>Các hàm hash có sẵn trong python</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        
		<meta name="generator" content="Phạm Duy Tùng" />
        
  
    
  

  

  
  
  
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content='/favicon/mstile.png'>
  <meta name="application-name" content="Phạm Duy Tùng Machine Learning Blog">
  <meta name="msapplication-tooltip" content="Blog ML của Phạm Duy Tùng và Đặng Thị Hằng">
   
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">



        
        
            <meta name="description" content="Trong bài viết này, mình sẽ đề cập đến các thuật toán hash có sẵn trong python">
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Các hàm hash có sẵn trong python"/>
<meta name="twitter:description" content="Trong bài viết này, mình sẽ đề cập đến các thuật toán hash có sẵn trong python"/>
<meta name="twitter:site" content="@example"/>

        <meta property="og:title" content="Các hàm hash có sẵn trong python" />
<meta property="og:description" content="Trong bài viết này, mình sẽ đề cập đến các thuật toán hash có sẵn trong python" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2020-01-13-hash-in-python/" />
<meta property="article:published_time" content="2020-01-25T00:19:00+03:00" />
<meta property="article:modified_time" content="2020-01-25T00:19:00+03:00" />

        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        <meta itemprop="name" content="Các hàm hash có sẵn trong python">
<meta itemprop="description" content="Trong bài viết này, mình sẽ đề cập đến các thuật toán hash có sẵn trong python">
<meta itemprop="datePublished" content="2020-01-25T00:19:00&#43;03:00" />
<meta itemprop="dateModified" content="2020-01-25T00:19:00&#43;03:00" />
<meta itemprop="wordCount" content="1126">



<meta itemprop="keywords" content="python,hash," />
        

        
            
        

        
        
          
			
			 <link rel="stylesheet" href="/css/font-awesome.min.css">
			 <link rel="stylesheet" href="/css/bootstrap.min.css">


          
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.15.8/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-114911596-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

	  
	  <style>
	  
	  body{
font-family: Helvetica,Arial,sans-serif;
}

.card{
	margin-bottom: 10px;
}

#disqus_thread{
padding: 0 5px;
}

.item-header{
padding: 0;
}

.single-content-img{
width: 100%;
    max-height: 450px !important;
    background-size: cover;
    display: block;
    background-position: center;
}

.thumbnail {
    position: relative;
}

.caption {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
	background: rgba(0, 0, 0, 0.25);
	text-align:left;
}

.caption .title{
	font-size: 1.6em;
    line-height: 1.4em;
    top: 0;
	margin-left:20px;
	margin-top:20px;
	
}

.caption .title-caption{
margin-left:10px;
}

#content p{
text-align: justify;
    line-height: 1.9;
    font-size: 12pt;
}

#content img{
	display: block;
    margin-left: auto;
margin-right: auto;
max-width:98%;
}

img + strong {
    font-style: normal;
    display: inherit;
    text-align: center;
}
.img-news{
max-height:150px;
width:100%;
}

.news-tittle{
	padding-top:15px;
	text-align:justify;
}

.author{
	color: orange;
}
.author-inline{
	color: orange;
}

.adv{
height:18px;
}

h1, h2, h3, h4{
padding-bottom: 10px;
    font-weight: bold;
}

h1{
color: #d04764}


h2{
color: orange}

h3{
color: #d04764}

h4{
color: #8dec89}

.hljs{
    white-space: pre-wrap;
    white-space: -moz-pre-wrap;
    white-space: -pre-wrap;
    white-space: -o-pre-wrap;
    word-wrap: break-word;}
	  .titledetail {
    display: block;
    overflow: hidden;
    line-height: 53px;
    font-size: 45px;
    color: #333;
    font-family: 'Roboto Condensed',sans-serif;
    font-weight: 600;
    margin: auto;
	padding:25px 0;
	text-align:justify;
}

.newsrelate {
    display: block;
    overflow: hidden;
	 list-style:none;
}
a ,a:hover{
    text-decoration: none;
}
.newsrelate li {
    float: left;
    overflow: hidden;
    width: 30%;
    margin-left: 2.5%;
    margin-bottom: 15px;
}

.newsrelate li a {
    display: block;
    overflow: hidden;
}

.newsrelate li h3 {
    display: block;
    overflow: hidden;
    line-height: 1.3em;
    font-size: 16pt;
    color: #333;
    line-height: 22px;
    font-weight: 300;
    font-family: Arial,Helvetica,sans-serif;
    width: auto;
    margin: 5px auto;
}

.titlerelate {
    overflow: hidden;
    font-size: 18px;
    font-weight: 600;
    color: #333;
    font-family: 'Roboto Condensed',sans-serif;
    line-height: 32px;
    text-transform: uppercase;
}


	  </style>
	  
    </head>
    <body>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1546237302193677',
      xfbml      : true,
      version    : 'v5.0'
    });
    FB.AppEvents.logPageView();
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v5.0&appId=1853483258232756&autoLogAppEvents=1"></script>
      
      

    
    
<header id="header"  style="background: #790014; color: hsla(0,0%,100%,1);">
<div class="container">
    <nav class="navbar navbar-expand-md navbar-dark">
	
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            
                <li class="nav-item">
                    <a class='nav-link' href="/blog">
                            <i class="fa fa-home active">&nbsp;</i>Home
                    </a>
                </li>
            
                <li class="nav-item">
                    <a class='nav-link' href="/news/">
                            <i class="fa fa-list">&nbsp;</i>News
                    </a>
                </li>
            
                <li class="nav-item">
                    <a class='nav-link' href="/xem-truyen/">
                            <i class="fa fa-id-card-o">&nbsp;</i>Truyện
                    </a>
                </li>
            
        </ul>
    </nav>
    </div></div>
</header>


   
    
	<div class="container">
	<div class="adv"></div>
	<div>
    <main role="main" >
	
        
        
        <article class="col-md-10 col-lg-9 mx-auto">
  


        
		 <div class="">
            <h3 class="titledetail">Các hàm hash có sẵn trong python</h3>
			
			<div class="col-md-12">
			 
			  <time class="published"
            datetime='2020-01-25'>
            25/01/2020</time>
		 - 
			   <span class="author"></span>
			   
			
		<div class="thumbnail text-center">
		 <img class="img-fluid single-content-img lazy" src="../../post_image/sao_bac_dau.png" />
		
			</div>
			 
            
        
       



  

  

  <div id="content" class="col-md-10 mx-auto">
    <h1 id="lời-mở-đầu">Lời mở đầu</h1>
<h1 id="built-in-hashing">Built-In Hashing</h1>
<p>Python có xây dựng sẵn cho chúng ta một hàm hash, chúng ta cứ việc gọi ra và sử dụng.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">hash(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">pham duy tung</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#f92672">-</span><span style="color:#ae81ff">7141560399917772220</span>
</code></pre></div><p>Một lưu ý nhỏ là giá trị của hàm hash  sẽ khác nhau giữa các phiên bản python. Ví dụ ở trên mình xài python 3.8, với bản 3.6 sẽ là</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">hash(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">pham duy tung</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#ae81ff">1568935795476364190</span>
</code></pre></div><h1 id="checksums">Checksums</h1>
<p>Chúng ta có thể sử dụng checksums để hash dữ liệu. Checksum được sử dụng trong thuật toán nén file ZIP để đảm bảo toàn vẹn dữ liệu sau khi nén. Thư viện zlib của python hỗ trợ 2 hàm tính checksum là adler32 và crc32. Để đảm bảo tốc độ chương trình và chỉ cần lấy hash đơn giản, chúng ta có thể sử dụng hàm Adler32. Tuy nhiên, nếu bạn muốn chương trình có độ tin cậy cao hoặc đơn giản là checksums, hãy sử dụng crc32. Các bạn có thể đọc bài viết ở đây <a href="https://www.leviathansecurity.com/blog/analysis-of-adler32">https://www.leviathansecurity.com/blog/analysis-of-adler32</a> để hiểu hơn.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">import</span> zlib
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> zlib<span style="color:#f92672">.</span>adler32(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#ae81ff">524616855</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> zlib<span style="color:#f92672">.</span>crc32(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#ae81ff">3750031252</span>
</code></pre></div><h1 id="secure-hashing">Secure Hashing</h1>
<p>Mã hóa an toàn (Secure Hashing) và bảo mật dữ liệu đã được nghiên cứu và ứng dụng từ nhiều năm về trước. Tiền thân là thuật toán MD5 đến SHA1, SHA256, SHA512&hellip;. Mỗi thuật toán ra đời sau sẽ cải tiến độ bảo mật và giảm đụng độ của các thuật toán trước đó.</p>
<p>Một số hàm hash phổ biến:</p>
<h2 id="md5-16-bytes128-bit">MD5– 16 bytes/128 bit</h2>
<p>Chuỗi đầu ra của  MD5 có kích thước 16 bytes hay 16*8 = 128 bits. Ở thời điểm hiện tại MD5 không còn là thuật toán phổ biến và không được khuyến khích dùng bởi các tổ chức bảo mật.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">import</span> hashlib
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hashlib<span style="color:#f92672">.</span>md5(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>hexdigest()
<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">58067430b9caa44f5ac1220b171f45c8</span><span style="color:#e6db74">&#39;</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> len(hashlib<span style="color:#f92672">.</span>md5(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>digest()) <span style="color:#75715e"># Chiều dài của đầu ra là 16 bytes</span>
<span style="color:#ae81ff">16</span>
</code></pre></div><p>Chú ý:
Hàm hexdigest biểu diễn một byte thành một ký tự hex (2 ký tự  đầu 58 của ví dụ trên là giá trị hex của số 88 trong hệ thập phân)</p>
<h2 id="sha120-bytes160-bits">SHA1–20 bytes/160 bits</h2>
<p>Đầu ra của SHA1 có chiều dài là 20 bytes tương ứng với 160 bit. Cũng giống như MD5, SHA1 cũng không được khuyến khích sử dụng ở trong các ứng dụng bảo mật.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">import</span> hashlib
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hashlib<span style="color:#f92672">.</span>sha1(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>hexdigest()
<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">b95b8716f15d89b6db67e2e788dea42d3fba5ee8</span><span style="color:#e6db74">&#39;</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> len(hashlib<span style="color:#f92672">.</span>sha1(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>digest())
<span style="color:#ae81ff">20</span>


</code></pre></div><h2 id="sha25632-bytes256-bit-và-sha51264-bytes512-bit">SHA256–32 bytes/256 bit và SHA512–64 bytes/512 bit</h2>
<p>Đây là hai hàm hash được khuyên là nên dùng ở thời điểm hiện tại</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hashlib<span style="color:#f92672">.</span>sha256(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>hexdigest()
<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">611b322b6b8ee570831c6061408ac5aa77fcdb572206d5d443855f5d3c1383c6</span><span style="color:#e6db74">&#39;</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> len(hashlib<span style="color:#f92672">.</span>sha256(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>digest())
<span style="color:#ae81ff">32</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hashlib<span style="color:#f92672">.</span>sha512(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>hexdigest()
<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">ac1f6a2dd234bc15c1fa2be1db4e55ad4af8c476abb8e3d9ac3d4c74d3e151c23314e20925616e90a0bcb13a38b5531e064c586d65fed54504d713fdabee03f9</span><span style="color:#e6db74">&#39;</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> len(hashlib<span style="color:#f92672">.</span>sha512(<span style="color:#e6db74">b</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>digest())
<span style="color:#ae81ff">64</span>
</code></pre></div><h1 id="near-duplicate-detection">Near-Duplicate Detection</h1>
<p>Các thuật toán được giới thiệu ở trên, khi chúng ta thay đổi giá trị đầu vào, dù chỉ một giá trị nhỏ thôi ở một vài vị trí nào đó, thì kết quả trả ra lại khác nhau khá lớn. Tuy nhiên, đôi khi chúng ta gặp những bài toán tìm nội dung tương tự nhau hoặc gần như tương tự nhau. Ví dụ giống như google crawler dữ liệu xác định những bài văn copy paste từ những trang web khác nhau, hoặc phát hiện đạo văn, phát hiện đạo nhạc &hellip;</p>
<p>Một thuật toán khá phổ biến nằm trong nhóm này là SimHash. Thuật toán được google sử dụng  để tìm ra các trang gần trùng nhau (theo wiki <a href="https://en.wikipedia.org/wiki/SimHash)">https://en.wikipedia.org/wiki/SimHash)</a>. Tác giả của thuật toán là Moses Charikar.</p>
<p>Để dùng Simhash, chúng ta phải cài đặt package từ kho của python</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> simhash <span style="color:#f92672">import</span> Simhash

<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> Simhash(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>value
<span style="color:#ae81ff">17022061268703429674</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> Simhash(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pham Duy Tung1</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>value
<span style="color:#ae81ff">17184261516160517290</span>

</code></pre></div><p>Một trong những lưu ý quan trọng khi sử dụng SimHash  ( tham khảo <a href="https://stackoverflow.com/questions/49820228/how-to-compare-the-similarity-of-documents-with-simhash-algorithm/49831194#49831194">https://stackoverflow.com/questions/49820228/how-to-compare-the-similarity-of-documents-with-simhash-algorithm/49831194#49831194</a>)</p>
<ul>
<li>
<p>SimHash thật sự hữu ích trong bài toán phát hiện văn bản trùng lắp.</p>
</li>
<li>
<p>Để tìm văn bản trùng lắp chính xác, dúng ta có thể sử dụng các thuật toán đơn giản mà hiệu quả như md5, sha1sha1.</p>
</li>
<li>
<p>Thuật toán phù hợp các văn bản lớn, không phù hợp cho các câu văn nhỏ.</p>
</li>
</ul>
<p>Đoạn code bên dưới là một ví dụ được dùng để tìm các văn bản có đạo nội dung.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"> <span style="color:#75715e">#assuming that you have a dictionary with document id as the key and the document as the value: </span>
<span style="color:#75715e"># documents = { doc_id: doc } you can do:</span>

<span style="color:#f92672">from</span> simhash <span style="color:#f92672">import</span> simhash

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">split_hash</span>(str, num):
    <span style="color:#66d9ef">return</span> [ str[start:start<span style="color:#f92672">+</span>num] <span style="color:#66d9ef">for</span> start <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>, len(str), num) ]

hashes <span style="color:#f92672">=</span> {}
<span style="color:#66d9ef">for</span> doc_id, doc <span style="color:#f92672">in</span> documents<span style="color:#f92672">.</span>items():
    hash <span style="color:#f92672">=</span> simhash(doc)

    <span style="color:#75715e"># you can either use the whole hash for higher precision or split into chunks for higher recall</span>
    hash_chunks <span style="color:#f92672">=</span> split_hash(hash, <span style="color:#ae81ff">4</span>)

    <span style="color:#66d9ef">for</span> chunk <span style="color:#f92672">in</span> hash_chunks:
        <span style="color:#66d9ef">if</span> chunk <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> hashes:
            hashes[chunk] <span style="color:#f92672">=</span> []
        hashes[chunk]<span style="color:#f92672">.</span>append(doc_id)

<span style="color:#75715e"># now you can print the duplicate documents:</span>
<span style="color:#66d9ef">for</span> hash, doc_list <span style="color:#f92672">in</span> hashes:
    <span style="color:#66d9ef">if</span> doc_list <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Duplicates documents: </span><span style="color:#e6db74">&#34;</span>, doc_list)

</code></pre></div><p>Ngoài SimHash, còn một thuật toán hash khá nổi tiếng nữa cũng được google sử dụng trong việc cá nhân hóa người dùng, đó là MinHash. Ở các bài viết tiếp theo mình sẽ viết về thuật toán này.</p>
<h1 id="perceptual-hashing">Perceptual Hashing</h1>
<p>Loại hash cuối cùng chúng ta đề cập ở đây là  perceptual hashing. Loại hash này được sử dụng để phát hiện sự khác nhau trong tập hình ảnh hoặc trong video.</p>
<p>Một ví dụ của các thuật toán thuộc nhóm là là được dùng để phát hiện các frame ảnh trùng lắp trong video. Thuật toán được dùng để loại bỏ những nội dung trùng lắp, giúp tiết kiệm lưu trữ. Hoặc dùng trong các thuật toán tóm tắt video.</p>
<p><img src="/post_image/google_free_ds_1.png" alt="Ảnh 11">
<img src="/post_image/google_free_ds_2.png" alt="Ảnh 2"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">import</span> hashlib
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> Image
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> image1 <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">google_free_ds1.png</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> image1 <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">google_free_ds_1.png</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> image2 <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">google_free_ds_2.png</span><span style="color:#e6db74">&#34;</span>)
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hashlib<span style="color:#f92672">.</span>sha256(image1<span style="color:#f92672">.</span>tobytes())<span style="color:#f92672">.</span>hexdigest()
<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">c57d0b5b1ca64077b45bdb65f817497834675232a2fc2ed76d6b8aa7955126b9</span><span style="color:#e6db74">&#39;</span>
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hashlib<span style="color:#f92672">.</span>sha256(image2<span style="color:#f92672">.</span>tobytes())<span style="color:#f92672">.</span>hexdigest()
<span style="color:#e6db74"></span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">02ea5e51b19cf3748f91f9bbe26976e9e14dca4b47e0aaff88ab20030a695f44</span><span style="color:#e6db74">&#39;</span>

</code></pre></div><p>Giá trị hash khác xa nhau, có vẻ chúng ta không thể nào sử dụng SHA256 trong bài toán này được. Lúc này, chúng ta sẽ tìm tới các thư viện thuộc nhóm Perceptual Hashing, một trong số chúng là ImageHash.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">import</span> imagehash
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hash1 <span style="color:#f92672">=</span> imagehash<span style="color:#f92672">.</span>average_hash(image1)
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hash2 <span style="color:#f92672">=</span> imagehash<span style="color:#f92672">.</span>average_hash(image2)
<span style="color:#f92672">&gt;&gt;</span><span style="color:#f92672">&gt;</span> hash1<span style="color:#f92672">-</span>hash2
<span style="color:#ae81ff">24</span>

</code></pre></div><p>Giá trị hash của hai ảnh trên là khác nhau, nhưng sự khác nhau là rất ít. Chứng tỏ hai ảnh trên có thể là bản sao của nhau.</p>
<h1 id="kết-luận">Kết luận</h1>
<p>Trong bài viết này, chúng ta đã đề cập qua các cách khác nhau để hash dữ liệu trong Python. Phụ thuộc vào bài toán, chúng ta sẽ sử dụng các thuật toán với các tham số phù hợp. Hi vọng bài viết này sẽ ít nhiều giúp ích được cho các bạn.</p>
<p>Chú thích:</p>
<ul>
<li>
<p>Ảnh cover của bài viết là ảnh của chùm sao thất tinh bắc đẩu mình chụp từ trang <a href="https://stellarium-web.org/">https://stellarium-web.org/</a>.</p>
</li>
<li>
<p>hash collision : Khi cho 2 input khác nhau vào hàm hash mà cùng ra một output -&gt; collision.</p>
</li>
</ul>
<p>Nguồn bài viết:</p>
<p><a href="https://medium.com/better-programming/how-to-hash-in-python-8bf181806141">https://medium.com/better-programming/how-to-hash-in-python-8bf181806141</a></p>

  </div>
  
			</div>
  <footer class="col-md-10  mx-auto">
  <div >
  <div class="fb-like" data-share="true"  data-width="450"  data-show-faces="true">
</div> </p></div>
    <ul class="stats list-unstyled">
 
    
  <li class="tags">
    <ul class="list-inline">
       
            
            
                <i class="fa fa-tags"></i>
                
                
                <li class="list-inline-item"><a class="article-category-link" href="/tags/python">python</a></li>
                
                
                <li class="list-inline-item"><a class="article-category-link" href="/tags/hash">hash</a></li>
                
            
        
    </ul>
  </li>
  
</ul>

	</div>
  </footer>
  <hr/>
<div class="titlerelate">Bài viết khác</div>
<div class="infinite-container featured-task">
<div class="card-deck card-break infinite-item">



    
        <div class="card">
		<a href="/blog/2019-12-25-nms/"
                class="button big previous">
		
		<img class="card-img-top lazy" src="../../post_image/rusian_girl_detection.jpg" width="100" />
		<div class="card-body">
		<h5 class="card-title">
		Tìm hiểu Non-maximum Suppression (NMS)
				</h5>
				</div>
				</a>
				</div>
    

    

</div>
</div>



<div class="fb-comments" data-href="" data-width="" data-numposts="5"></div>

    <article class="post">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "phamduytung" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>



</article>


		
    </main>
    
	</div>
	</div>
    
	<hr>
  <footer class="footer">
  <div class="container text-center">
    
    <p class="copyright">
      
        &copy; 2020
        
          Phạm Duy Tùng Machine Learning Blog
        
      
     
    </p>
	</div>
  </footer>
    
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.15.8/languages/python.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
     

   <script src="/js/jquery-3.3.1.min.js"></script>
   
    <script src="/js/bootstrap.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
     
    

    
      
        
      
    
	
    
    <script>hljs.initHighlightingOnLoad();</script>
      
<script async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


	  
	  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114911596-1"  data-cfasync="false"></script>
<script  data-cfasync="false">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114911596-1');
</script>
<script src="https://cdn.jsdelivr.net/npm/intersection-observer@0.5.1/intersection-observer.js"  data-cfasync="false"></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@12.0.0/dist/lazyload.min.js"  data-cfasync="false"></script>
	   <script  type="text/javascript"  data-cfasync="false">

  function getcontent(){
 

   

             var myLazyLoad = new LazyLoad({
    elements_selector: ".lazy"
});
                }
            
			
			$(document).ready(function(){
			getcontent();
			}); 
</script>

  </body>
</html>

